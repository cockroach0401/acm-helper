// i18n translations for Dashboard
export const translations = {
    en: {
        // Brand / Nav
        brand: 'ACM Helper',
        nav_dashboard: 'Dashboard',
        nav_problems: 'Problems',
        nav_reports: 'Reports',
        nav_settings: 'Settings',

        // Dashboard Page
        page_dashboard: 'Dashboard',
        btn_refresh: 'Refresh',
        stat_total: 'Total',
        stat_solved: 'Solved',
        stat_pending: 'Pending',
        stat_running: 'Running',
        stat_failed: 'Failed',
        section_pending_solutions: 'Pending Solutions',
        btn_generate_all: 'Generate All',
        section_tasks: 'Tasks',
        table_topic: 'Topic',
        table_status: 'Status',
        table_solution: 'Solution',
        table_updated: 'Updated',
        table_action: 'Action',
        table_id: 'ID',
        table_problem_no: 'Problem No.',
        table_provider_name: 'API Provider Name',
        table_message: 'Message',
        no_pending: 'No pending solutions',
        no_tasks: 'No active tasks',
        btn_generate: 'Generate',

        // Problems Page
        page_problems: 'Problems',
        section_submit_ac: 'Submit AC Code',
        section_problem_list: 'Problem List',
        label_problem_key: 'Problem Key (source:id)',
        label_language: 'Language',
        label_code: 'Code',
        btn_submit_code: 'Submit Code',
        btn_view_content: 'View Content',
        section_manual_import: 'Manual Import',
        label_import_source: 'Source',
        label_import_id: 'ID',
        label_import_title: 'Title',
        label_import_url: 'URL',
        label_import_status: 'Status',
        label_import_content: 'Content',
        label_import_input_format: 'Input Format',
        label_import_output_format: 'Output Format',
        label_import_constraints: 'Constraints',
        label_import_ac_code: 'AC Code',
        label_import_tags: 'Tags',
        btn_import: 'Import Problems',
        placeholder_import_source: 'e.g. manual',
        placeholder_import_id: 'e.g. A1',
        placeholder_import_title: 'e.g. Demo Problem',
        placeholder_import_url: 'e.g. https://www.luogu.com.cn/problem/P1010',
        placeholder_import_content: 'Problem description...',
        placeholder_import_input_format: 'Describe input format...',
        placeholder_import_output_format: 'Describe output format...',
        placeholder_import_constraints: 'Describe constraints...',
        placeholder_import_ac_code: 'Paste your accepted code...',
        placeholder_import_tags: 'e.g. dp, greedy, graph',
        placeholder_problem_key: 'e.g. codeforces:123A',
        placeholder_code: 'Paste your solved code here...',

        // Problem Management
        filter_keyword: 'Keyword',
        filter_status: 'Status',
        filter_source: 'Source',
        col_title: 'Title',
        col_source: 'Source',
        col_status: 'Status',
        col_translation: 'Translation',
        col_action: 'Action',
        btn_translate: 'Translate',
        translated_done: 'Translated',
        btn_auto_tag: 'AI Tag',
        btn_delete: 'Delete',
        btn_confirm_delete: 'Confirm Delete',
        msg_confirm_delete: 'Are you sure you want to delete this problem?',
        msg_confirm_delete_model: 'Are you sure you want to delete model',
        msg_deleted: 'Problem deleted',
        msg_translation_started: 'Translation started',
        status_solved: 'Solved',
        status_attempted: 'Attempted',
        status_unsolved: 'Unsolved',
        status_all: 'All',

        // Reports Page
        page_reports: 'Statistics & Reports',
        section_statistics: 'Statistics',
        chart_activity: 'Activity',
        label_heatmap_range: 'Range',
        heatmap_range_year: 'Calendar Year',
        heatmap_range_365: 'Last 365 Days',
        heatmap_mode_year: 'Year',
        heatmap_mode_365: '365d',
        chart_weekly: 'Weekly Progress',
        card_weekly_report: 'Weekly Report',
        card_phased_report: 'Phased Report',
        label_select_week: 'Select Week',
        label_select_start_week: 'Start Week',
        label_select_end_week: 'End Week',
        section_report_actions: 'Report Actions',
        report_hint: 'Select a week and generate or view its report.',
        btn_generate_report: 'Generate Weekly Report',
        btn_view_report: 'View Weekly Report',
        label_status: 'Status',
        lbl_report_status: 'Status:',
        msg_no_weekly_data: 'No weekly data',
        weekly_summary_total: 'Solved (12w)',
        weekly_summary_active_weeks: 'Active Weeks',
        weekly_summary_best_week: 'Best Week',
        weekly_summary_attempted: 'Attempted',
        weekly_summary_unsolved: 'Unsolved',

        // Problem Details
        section_problem_details: 'Problem Details & Submission',
        label_difficulty: 'Difficulty',
        label_reflection: 'Reflection / Notes',
        placeholder_reflection: 'What did you learn?',
        btn_save_details: 'Save Details & Code',

        // Settings Page
        page_settings: 'Settings',
        section_ai_provider: 'AI Provider',
        label_provider_profiles: 'Providers',
        label_provider_name: 'Provider Name',
        label_active_provider: 'Active',
        btn_test: 'Test',
        btn_add_provider: 'Add Provider',
        btn_activate_provider: 'Set Active',
        btn_edit_provider: 'Edit',
        btn_delete_provider: 'Delete',
        label_provider: 'Provider',
        label_api_base: 'API Base URL',
        label_api_key: 'API Key',
        label_model: 'Model',
        label_temperature: 'Temperature',
        label_timeout: 'Timeout (s)',
        btn_save_ai: 'Save AI Settings',
        section_templates: 'Prompt Templates & UI',
        label_solution_template: 'Solution Prompt Template',
        label_weekly_template: 'Prompt Template',
        label_weekly_template_vars: 'Weekly Template Variables',
        label_solution_template_vars: 'Solution Template Variables',
        label_default_language: 'Default Language (Template Variable)',
        hint_default_language_variable: 'This value is injected as {{default_ac_language}} in solution prompt templates.',
        label_storage_path: 'Storage Path',
        btn_pick_storage_path: 'Pick',
        hint_storage_path_migrate: 'Switching storage path migrates all local data files.',
        label_obsidian_mode: 'Obsidian Mode',
        hint_obsidian_mode: 'When enabled, both problem and solution markdown files include YAML frontmatter tags for Obsidian.',
        label_weekly_prompt_style: 'Solution Prompt Style',
        style_custom: 'Custom',
        style_none: 'None',
        style_rigorous: 'Rigorous (strict derivation and proof)',
        style_intuitive: 'Intuitive (Ramanujan stare method)',
        style_concise: 'Concise (too many words, keep it short)',
        hint_style_options: 'Choose a style to auto-inject guidance into solution generation.',
        label_weekly_style_injections: 'Solution Style Prompt Injections',
        placeholder_style_injection_custom: 'Prompt injection slot for Custom style...',
        placeholder_style_injection_rigorous: 'Prompt injection slot for Rigorous style...',
        placeholder_style_injection_intuitive: 'Prompt injection slot for Intuitive style...',
        placeholder_style_injection_concise: 'Prompt injection slot for Concise style...',
        label_solution_images: 'Solution Draft/Reference Images',
        hint_solution_images: 'Upload draft sketches or reference images. AI will use them for multimodal solution generation. (Max 5 images, 3MB each)',
        btn_upload_image: 'Select Images',
        msg_uploading_image: 'Uploading...',
        msg_image_uploaded: 'Image uploaded',
        msg_image_deleted: 'Image deleted',
        msg_image_upload_failed: 'Upload failed',
        msg_image_delete_failed: 'Delete failed',
        drag_drop_images: 'Drag & Drop images here or paste from clipboard',
        btn_show_template_vars: 'Show Variables',
        btn_hide_template_vars: 'Hide Variables',
        btn_save_templates: 'Save Templates',
        btn_save_ui: 'Save Language Settings',
        btn_save_settings: 'Save Settings',
        btn_reset_default: 'Reset Default',

        // Toasts / Messages
        msg_testing: 'Testing...',
        msg_test_success: 'Connection test passed. Model is available.',
        msg_connection_success: 'Connection Successful',
        msg_connection_failed: 'Connection Failed',
        msg_ai_saved: 'AI Settings Saved',
        msg_provider_name_empty: 'Provider name is required',
        msg_unsaved_ai_changes: 'You have unsaved AI profile changes. Continue and discard them?',
        msg_provider_added: 'Provider added',
        msg_provider_switched: 'Provider switched',
        msg_confirm_delete_provider: 'Are you sure you want to delete provider',
        msg_unsaved_ai_changes: 'You have unsaved AI settings changes. Discard?',
        default_provider_name_prefix: 'Provider',
        msg_templates_saved: 'Templates Saved',
        msg_ui_saved: 'Language Settings Saved',
        msg_storage_path_picked: 'Storage path selected',
        msg_storage_path_saved: 'Storage path switched and data migrated',
        msg_storage_path_switch_blocked_running: 'Cannot switch storage path while tasks are queued or running',
        msg_imported: 'Imported',
        msg_updated: 'Updated',
        msg_input_empty: 'Input is empty',
        msg_invalid_json: 'Invalid JSON',
        msg_invalid_key: 'Invalid Key. Format: source:id',
        msg_code_empty: 'Code is empty',
        msg_meta_saved: 'Details & Code Saved',
        msg_ac_saved: 'AC Code Saved',
        msg_loading: 'Loading...',
        msg_no_content: '(No content)',
        msg_generating: 'Generating report for',
        msg_report_generated: 'Report Generation Started',
        msg_tasks_created: 'tasks created',
        msg_error: 'Error',
        msg_starting_generation: 'Starting generation for',
        msg_task_failed: 'Task failed',
        msg_auto_tagging: 'AI tagging in progress...',
        msg_auto_tag_done: 'AI tagging completed',
        msg_confirm_auto_tag_without_solution: 'No solution markdown found. Continue AI tagging now?',
        msg_select_week: 'Please select a week.',
        task_type_weekly_report: 'Weekly Report',
        task_type_phased_report: 'Phased Report',
        msg_solution_template_reset: 'Solution template reset to default',
        msg_weekly_template_reset: 'Weekly template reset to default',
        msg_templates_reset: 'Templates reset to default',

        // Setup Overlay
        setup_title: 'Welcome to ACM Helper',
        setup_desc: 'Please select a folder to store your data (problems, solutions, settings).',
        setup_pick_dir: 'Select Storage Directory',
        setup_use_default: 'Use Default Directory',
        msg_error_unknown: 'Unknown error'
    },

    zh: {
        // Brand / Nav
        brand: 'ACM 助手',
        nav_dashboard: '控制面板',
        nav_problems: '题目列表',
        nav_reports: '统计报告',
        nav_settings: '设置',

        // Dashboard Page
        page_dashboard: '控制面板',
        btn_refresh: '刷新',
        stat_total: '总计',
        stat_solved: '已解决',
        stat_pending: '待处理',
        stat_running: '运行中',
        stat_failed: '失败',
        section_pending_solutions: '待生成题解',
        btn_generate_all: '全部生成',
        section_tasks: '任务列表',
        table_topic: '题目',
        table_status: '状态',
        table_solution: '题解',
        table_updated: '更新时间',
        table_action: '操作',
        table_id: 'ID',
        table_problem_no: '题号',
        table_provider_name: 'API 服务商名称',
        table_message: '消息',
        no_pending: '暂无待生成题解',
        no_tasks: '暂无进行中的任务',
        btn_generate: '生成',

        // Problems Page
        page_problems: '题目',
        section_submit_ac: '提交 AC 代码',
        section_problem_list: '题目列表',
        label_problem_key: '题目 Key (来源:ID)',
        label_language: '语言',
        label_code: '代码',
        btn_submit_code: '提交代码',
        btn_view_content: '查看内容',
        section_manual_import: '手动导入',
        label_import_source: '来源',
        label_import_id: 'ID',
        label_import_title: '标题',
        label_import_url: '原题链接',
        label_import_status: '状态',
        label_import_content: '内容',
        label_import_input_format: '输入格式',
        label_import_output_format: '输出格式',
        label_import_constraints: '限制条件',
        label_import_ac_code: 'AC 代码',
        label_import_tags: '标签',
        btn_import: '导入题目',
        placeholder_import_source: '例如: manual',
        placeholder_import_id: '例如: A1',
        placeholder_import_title: '例如: 示例题目',
        placeholder_import_url: '例如: https://www.luogu.com.cn/problem/P1010',
        placeholder_import_content: '题目描述...',
        placeholder_import_input_format: '描述输入格式...',
        placeholder_import_output_format: '描述输出格式...',
        placeholder_import_constraints: '描述限制条件...',
        placeholder_import_ac_code: '粘贴您的 AC 代码...',
        placeholder_import_tags: '例如: 动态规划, 贪心, 图论',
        placeholder_problem_key: '例如: codeforces:123A',
        placeholder_code: '在此粘贴您的解题代码...',

        // Problem Management
        filter_keyword: '关键词',
        filter_status: '状态',
        filter_source: '来源',
        col_title: '标题',
        col_source: '来源',
        col_status: '状态',
        col_translation: '翻译',
        col_action: '操作',
        btn_translate: '翻译',
        translated_done: '已翻译',
        btn_auto_tag: 'AI 标签',
        btn_delete: '删除',
        btn_confirm_delete: '确认删除',
        msg_confirm_delete: '您确定要删除这个题目吗？',
        msg_confirm_delete_model: '您确定要删除模型',
        msg_deleted: '题目已删除',
        msg_translation_started: '翻译已开始',
        status_solved: '已解决',
        status_attempted: '已尝试',
        status_unsolved: '未解决',
        status_all: '全部',

        // Reports Page
        page_reports: '统计与报告',
        section_statistics: '总体统计',
        chart_activity: '做题热力图',
        label_heatmap_range: '时间范围',
        heatmap_range_year: '自然年',
        heatmap_range_365: '最近 365 天',
        heatmap_mode_year: '今年',
        heatmap_mode_365: '365天',
        chart_weekly: '每周进度',
        card_weekly_report: '周报',
        card_phased_report: '阶段性报告',
        label_select_week: '选择周',
        label_select_start_week: '起始周',
        label_select_end_week: '截止周',
        section_report_actions: '报告操作',
        report_hint: '选择一个周并生成或查看其报告。',
        btn_generate_report: '生成周报',
        btn_view_report: '查看周报',
        label_status: '状态',
        lbl_report_status: '状态：',
        msg_no_weekly_data: '暂无周数据',
        weekly_summary_total: '已解决 (12周)',
        weekly_summary_active_weeks: '活跃周数',
        weekly_summary_best_week: '表现最好周',
        weekly_summary_attempted: '已尝试',
        weekly_summary_unsolved: '未解决',

        // Problem Details
        section_problem_details: '题目详情与提交',
        label_difficulty: '难度',
        label_reflection: '反思 / 笔记',
        placeholder_reflection: '你学到了什么？',
        btn_save_details: '保存详情与代码',

        // Settings Page
        page_settings: '设置',
        section_ai_provider: 'AI 提供商',
        label_provider_profiles: '配置列表',
        label_provider_name: '配置名称',
        label_active_provider: '当前启用',
        btn_test: '测试',
        btn_add_provider: '添加提供商',
        btn_activate_provider: '设为启用',
        btn_edit_provider: '编辑',
        btn_delete_provider: '删除',
        label_provider: '提供商',
        label_api_base: 'API 基础 URL',
        label_api_key: 'API 密钥',
        label_model: '模型',
        label_temperature: 'temperature',
        label_timeout: '超时 (秒)',
        btn_save_ai: '保存 AI 设置',
        section_templates: '提示词模板',
        label_solution_template: '题解提示词模板',
        label_weekly_template: '周报提示词模板',
        label_weekly_template_vars: '周报模板变量',
        label_solution_template_vars: '解法模板变量',
        btn_show_template_vars: '显示变量',
        btn_hide_template_vars: '隐藏变量',
        label_default_language: '默认语言',
        hint_default_language_variable: '代码默认语言和题解生成语言',
        label_storage_path: '存储路径',
        btn_pick_storage_path: '选择目录',
        hint_storage_path_migrate: '切换存储路径会迁移所有本地数据文件。',
        label_obsidian_mode: 'Obsidian 模式',
        hint_obsidian_mode: '启用后，题目和题解 Markdown 都会写入 Obsidian 可识别的 YAML frontmatter 标签字段。',
        label_weekly_prompt_style: '题解提示词风格',
        style_custom: '自定义',
        style_none: '无',
        style_rigorous: '严谨型（严格推导证明）',
        style_intuitive: '直觉型（拉马努金瞪眼法）',
        style_concise: '简洁型（太多字了懒得看）',
        hint_style_options: '选择风格后会自动应用风格到题解生成提示词。',
        label_weekly_style_injections: '题解风格提示词注入',
        placeholder_style_injection_custom: '自定义风格的提示词注入槽...',
        placeholder_style_injection_rigorous: '严谨风格的提示词注入槽...',
        placeholder_style_injection_intuitive: '直觉风格的提示词注入槽...',
        placeholder_style_injection_concise: '简洁风格的提示词注入槽...',
        label_solution_images: '参考题解/参考图',
        hint_solution_images: '上传参考题解截图。AI 将使用多模态能力结合图片生成题解。（最多5张，每张3MB）',
        btn_upload_image: '选择图片',
        msg_uploading_image: '上传中...',
        msg_image_uploaded: '图片已上传',
        msg_image_deleted: '图片已删除',
        msg_image_upload_failed: '上传失败',
        msg_image_delete_failed: '删除失败',
        drag_drop_images: '拖拽图片到此处或从剪贴板粘贴',
        btn_save_templates: '保存模板',
        btn_save_ui: '保存语言设置',
        btn_save_settings: '保存设置',
        btn_reset_default: '重置默认',

        // Toasts / Messages
        msg_testing: '测试中...请耐心等待...',
        msg_test_success: '连接测试通过，模型可用',
        msg_connection_success: '连接成功',
        msg_connection_failed: '连接失败',
        msg_ai_saved: 'AI 设置已保存',
        msg_provider_name_empty: '提供商名称不能为空',
        msg_unsaved_ai_changes: '您有未保存的 AI 配置更改。是否继续并放弃更改？',
        msg_provider_added: '已添加提供商',
        msg_provider_switched: '已切换提供商',
        msg_confirm_delete_provider: '您确定要删除提供商',
        msg_unsaved_ai_changes: '有未保存的 AI 设置更改，是否放弃？',
        default_provider_name_prefix: '提供商',
        msg_templates_saved: '模板已保存',
        msg_ui_saved: '语言设置已保存',
        msg_storage_path_picked: '已选择存储路径',
        msg_storage_path_saved: '存储路径已切换，数据已迁移',
        msg_storage_path_switch_blocked_running: '存在排队或运行中的任务，暂时无法切换存储路径',
        msg_imported: '已导入',
        msg_updated: '已更新',
        msg_input_empty: '输入为空',
        msg_invalid_json: '无效的 JSON',
        msg_invalid_key: '无效的 Key。格式：source:id',
        msg_code_empty: '代码为空',
        msg_meta_saved: '详情与代码已保存',
        msg_ac_saved: 'AC 代码已保存',
        msg_loading: '加载中...',
        msg_no_content: '(无内容)',
        msg_generating: '正在生成报告',
        msg_report_generated: '报告生成已开始',
        msg_tasks_created: '个任务已创建',
        msg_error: '错误',
        msg_starting_generation: '开始生成',
        msg_task_failed: '任务失败',
        msg_auto_tagging: 'AI 标签分类中...',
        msg_auto_tag_done: 'AI 标签分类完成',
        msg_confirm_auto_tag_without_solution: '当前没有题解 Markdown，是否仍继续 AI 标签分类？',
        msg_select_week: '请选择周。',
        task_type_weekly_report: '周报任务',
        task_type_phased_report: '阶段性报告任务',
        msg_solution_template_reset: '题解提示词模板已重置为默认',
        msg_weekly_template_reset: '周报提示词模板已重置为默认',
        msg_templates_reset: '提示词模板已重置为默认',

        // Setup Overlay
        setup_title: '欢迎使用 ACM 助手',
        setup_desc: '请选择一个文件夹来存储您的数据（题目、题解、设置）。',
        setup_pick_dir: '选择存储目录',
        setup_use_default: '使用默认目录(安装目录)',
        msg_error_unknown: '未知错误'
    }
};

let currentLang = localStorage.getItem('acm_helper_lang') || 'zh';

export function t(key) {
    return translations[currentLang]?.[key] || translations['en']?.[key] || key;
}

export function getLang() {
    return currentLang;
}

export function setLang(lang) {
    if (translations[lang]) {
        currentLang = lang;
        localStorage.setItem('acm_helper_lang', lang);
    }
}
